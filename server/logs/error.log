{"level":"error","message":"Failed to start server: generalRateLimit is not defined","service":"secure-auth-api","stack":"ReferenceError: generalRateLimit is not defined\n    at startServer (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\index.ts:43:13)","timestamp":"2025-09-11T09:24:04.688Z"}
{"level":"error","message":"Failed to start server: generalRateLimit is not defined","service":"secure-auth-api","stack":"ReferenceError: generalRateLimit is not defined\n    at startServer (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\index.ts:44:13)","timestamp":"2025-09-11T09:24:44.418Z"}
{"level":"error","message":"Failed to start server: generalRateLimit is not defined","service":"secure-auth-api","stack":"ReferenceError: generalRateLimit is not defined\n    at startServer (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\index.ts:44:13)","timestamp":"2025-09-11T09:27:29.393Z"}
{"level":"error","message":"Failed to start server: generalRateLimit is not defined","service":"secure-auth-api","stack":"ReferenceError: generalRateLimit is not defined\n    at startServer (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\index.ts:44:13)","timestamp":"2025-09-11T09:30:01.345Z"}
{"level":"error","message":"Failed to start server: generalRateLimit is not defined","service":"secure-auth-api","stack":"ReferenceError: generalRateLimit is not defined\n    at startServer (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\index.ts:44:13)","timestamp":"2025-09-11T09:30:31.556Z"}
{"level":"error","message":"Failed to start server: app.use() requires a middleware function","service":"secure-auth-api","stack":"TypeError: app.use() requires a middleware function\n    at Function.use (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\express@5.1.0\\node_modules\\express\\lib\\application.js:213:11)\n    at startServer (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\index.ts:45:9)","timestamp":"2025-09-11T09:30:59.679Z"}
{"codePrefix":"auth","errorInfo":{"code":"auth/invalid-phone-number","message":"The phone number must be a non-empty E.164 standard compliant identifier string."},"level":"error","message":"Registration error: The phone number must be a non-empty E.164 standard compliant identifier string.","service":"secure-auth-api","stack":"Error: The phone number must be a non-empty E.164 standard compliant identifier string.\n    at validateCreateEditRequest (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:357:15)\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:650:5\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1601:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:29:26)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:51:22)","timestamp":"2025-09-11T09:48:54.954Z"}
{"level":"error","message":"Registration controller error: Registration failed","service":"secure-auth-api","stack":"Error: Registration failed\n    at AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:51:22)","timestamp":"2025-09-11T09:48:54.956Z"}
{"codePrefix":"auth","errorInfo":{"code":"auth/invalid-phone-number","message":"The phone number must be a non-empty E.164 standard compliant identifier string."},"level":"error","message":"Registration error: The phone number must be a non-empty E.164 standard compliant identifier string.","service":"secure-auth-api","stack":"Error: The phone number must be a non-empty E.164 standard compliant identifier string.\n    at validateCreateEditRequest (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:357:15)\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:650:5\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1601:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:29:26)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:51:22)","timestamp":"2025-09-11T09:55:59.656Z"}
{"level":"error","message":"Registration controller error: Registration failed","service":"secure-auth-api","stack":"Error: Registration failed\n    at AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:51:22)","timestamp":"2025-09-11T09:55:59.658Z"}
{"codePrefix":"auth","errorInfo":{"code":"auth/invalid-phone-number","message":"The phone number must be a non-empty E.164 standard compliant identifier string."},"level":"error","message":"Registration error: The phone number must be a non-empty E.164 standard compliant identifier string.","service":"secure-auth-api","stack":"Error: The phone number must be a non-empty E.164 standard compliant identifier string.\n    at validateCreateEditRequest (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:357:15)\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:650:5\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1601:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:29:26)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T09:57:38.094Z"}
{"level":"error","message":"Registration controller error: Registration failed","service":"secure-auth-api","stack":"Error: Registration failed\n    at AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:78:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T09:57:38.097Z"}
{"level":"error","message":"Registration error: import_redis.redisClient.setex is not a function","service":"secure-auth-api","stack":"TypeError: import_redis.redisClient.setex is not a function\n    at AuthService.generateTokens (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:298:23)\n    at async AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:62:22)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T10:05:48.034Z"}
{"level":"error","message":"Registration controller error: Registration failed","service":"secure-auth-api","stack":"Error: Registration failed\n    at AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:78:13)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T10:05:48.037Z"}
{"codePrefix":"auth","errorInfo":{"code":"auth/email-already-exists","message":"The email address is already in use by another account."},"level":"error","message":"Registration error: The email address is already in use by another account.","service":"secure-auth-api","stack":"Error: The email address is already in use by another account.\n    at FirebaseAuthError.fromServerError (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\utils\\error.js:148:16)\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1629:49\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:33:26)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T10:12:53.680Z"}
{"level":"error","message":"Registration controller error: Registration failed","service":"secure-auth-api","stack":"Error: Registration failed\n    at AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:84:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T10:12:53.682Z"}
{"codePrefix":"auth","errorInfo":{"code":"auth/invalid-phone-number","message":"The phone number must be a non-empty E.164 standard compliant identifier string."},"level":"error","message":"Registration error: The phone number must be a non-empty E.164 standard compliant identifier string.","service":"secure-auth-api","stack":"Error: The phone number must be a non-empty E.164 standard compliant identifier string.\n    at validateCreateEditRequest (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:357:15)\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:650:5\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1601:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:33:26)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T10:19:06.857Z"}
{"level":"error","message":"Registration controller error: Registration failed","service":"secure-auth-api","stack":"Error: Registration failed\n    at AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:84:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T10:19:06.860Z"}
{"codePrefix":"auth","errorInfo":{"code":"auth/invalid-phone-number","message":"The phone number must be a non-empty E.164 standard compliant identifier string."},"level":"error","message":"Registration error: The phone number must be a non-empty E.164 standard compliant identifier string.","service":"secure-auth-api","stack":"Error: The phone number must be a non-empty E.164 standard compliant identifier string.\n    at validateCreateEditRequest (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:357:15)\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:650:5\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\firebase-admin@13.5.0\\node_modules\\firebase-admin\\lib\\auth\\auth-api-request.js:1601:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:33:26)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T10:21:54.481Z"}
{"level":"error","message":"Registration controller error: Registration failed: Error: The phone number must be a non-empty E.164 standard compliant identifier string.","service":"secure-auth-api","stack":"Error: Registration failed: Error: The phone number must be a non-empty E.164 standard compliant identifier string.\n    at AuthService.register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\services\\auth.service.ts:84:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\src\\controllers\\auth.controller.ts:52:22)","timestamp":"2025-09-11T10:21:54.483Z"}
{"level":"error","message":"Failed to create audit log: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"resourceId\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.","service":"secure-auth-api","stack":"Error: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"resourceId\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.\n    at validateUserInput (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@google-cloud+firestore@7.11.3\\node_modules\\@google-cloud\\firestore\\build\\src\\serializer.js:383:19)\n    at validateUserInput (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@google-cloud+firestore@7.11.3\\node_modules\\@google-cloud\\firestore\\build\\src\\serializer.js:375:13)\n    at validateDocumentData (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@google-cloud+firestore@7.11.3\\node_modules\\@google-cloud\\firestore\\build\\src\\write-batch.js:609:40)\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@google-cloud+firestore@7.11.3\\node_modules\\@google-cloud\\firestore\\build\\src\\reference\\collection-reference.js:214:52\n    at C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@google-cloud+firestore@7.11.3\\node_modules\\@google-cloud\\firestore\\build\\src\\telemetry\\enabled-trace-util.js:110:30\n    at NoopContextManager.with (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@opentelemetry+api@1.9.0\\node_modules\\@opentelemetry\\api\\src\\context\\NoopContextManager.ts:31:15)\n    at ContextAPI.with (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@opentelemetry+api@1.9.0\\node_modules\\@opentelemetry\\api\\src\\api\\context.ts:77:42)\n    at NoopTracer.startActiveSpan (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@opentelemetry+api@1.9.0\\node_modules\\@opentelemetry\\api\\src\\trace\\NoopTracer.ts:98:27)\n    at ProxyTracer.startActiveSpan (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@opentelemetry+api@1.9.0\\node_modules\\@opentelemetry\\api\\src\\trace\\ProxyTracer.ts:51:20)\n    at EnabledTraceUtil.startActiveSpan (C:\\Users\\ADMIN\\Documents\\PNPM\\nodejs-nextjs-firebase\\server\\node_modules\\.pnpm\\@google-cloud+firestore@7.11.3\\node_modules\\@google-cloud\\firestore\\build\\src\\telemetry\\enabled-trace-util.js:102:28)","timestamp":"2025-09-11T10:22:24.988Z"}
